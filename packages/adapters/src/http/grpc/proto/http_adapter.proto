syntax = "proto3";

package arcid.http;

// Basic HTTP Request and Response messages
message HttpRequest {
  map<string, string> params = 1;
  map<string, string> query = 2;
  string body = 3;
  map<string, string> headers = 4;
  map<string, string> cookies = 5;
}

message HttpResponse {
  int32 status_code = 1;
  string data = 2;
  map<string, string> headers = 3;
}

// Core HTTP service interface
service HttpAdapter {
  rpc Init(Empty) returns (StatusResponse);
  rpc Start(PortRequest) returns (StatusResponse);
  rpc Stop(Empty) returns (StatusResponse);

  rpc RegisterRoute(RouteDefinition) returns (StatusResponse);
  rpc UseMiddleware(MiddlewareDefinition) returns (StatusResponse);
}

// Supporting message types
message Empty {}

message PortRequest {
  int32 port = 1;
}

message RouteDefinition {
  string method = 1;
  string path = 2;
  string handler = 3; // handler reference or identifier
}

message MiddlewareDefinition {
  string name = 1;
}

message StatusResponse {
  bool success = 1;
  string message = 2;
}
